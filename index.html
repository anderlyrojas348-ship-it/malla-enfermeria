<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Malla Curricular ‚Äì Enfermer√≠a UPSJB</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f1fb;
  margin:0;
}

h1{
  background:#7b5fc6;
  color:white;
  padding:16px;
  margin:0;
  text-align:center;
}

/* PROGRESO GENERAL */
.progreso-box{
  background:white;
  width:90%;
  max-width:400px;
  margin:16px auto;
  padding:12px;
  border-radius:14px;
  border:2px solid #7b5fc6;
  text-align:center;
}

.barra{
  width:100%;
  height:14px;
  background:#ddd;
  border-radius:10px;
}

.barra span{
  display:block;
  height:100%;
  width:0%;
  background:#c7b7ea;
  border-radius:10px;
  transition:0.4s;
}

#textoProgreso{
  margin-top:8px;
  font-weight:bold;
  color:#7b5fc6;
}

/* CICLOS */
.ciclo{
  background:white;
  margin:12px;
  border-radius:16px;
  overflow:hidden;
  opacity:0.4;
}

.ciclo.activo{
  opacity:1;
}

.ciclo-header{
  background:#d6c9f0;
  padding:14px;
  cursor:pointer;
  font-weight:bold;
  color:#4a148c;
}

.cursos{
  display:none;
  padding:12px;
}

/* CURSOS */
.curso{
  padding:10px;
  margin:6px 0;
  border-radius:10px;
  font-size:14px;
  cursor:pointer;
}

.basico{ background:#ede7f6; }
.enfermeria{ background:#d1c4e9; }
.clinico{ background:#e8def8; }
.investigacion{ background:#cfc1eb; }
.internado{ background:#f2edf9; }

/* APROBADO + ANIMACI√ìN POP */
.aprobado{
  opacity:0.6;
  text-decoration:line-through;
  border:2px solid #7b5fc6;
  animation: pop 0.25s ease;
}

@keyframes pop{
  0%{ transform:scale(1); }
  50%{ transform:scale(1.08); }
  100%{ transform:scale(1); }
}

/* MODAL */
#modal{
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.4);
  justify-content:center;
  align-items:center;
  z-index:999;
}

#modalContent{
  background:white;
  padding:20px;
  border-radius:16px;
  width:85%;
  max-width:320px;
  text-align:center;
}
</style>

<script>
function toggleCiclo(header){
  const cursos = header.nextElementSibling;
  cursos.style.display = cursos.style.display === "block" ? "none" : "block";
}

function aprobar(el){
  el.classList.toggle("aprobado");
  guardar();
  actualizar();
}

function mostrarDetalle(el){
  const nombre = el.dataset.nombre;
  const creditos = el.dataset.creditos;
  const tipo = el.dataset.tipo;
  const estado = el.classList.contains("aprobado") ? "Aprobado ‚úÖ" : "Pendiente ‚è≥";

  document.getElementById("modalTitulo").innerText = nombre;
  document.getElementById("modalInfo").innerHTML =
    `<b>Cr√©ditos:</b> ${creditos}<br>
     <b>Tipo:</b> ${tipo}<br>
     <b>Estado:</b> ${estado}`;

  document.getElementById("modal").style.display="flex";
}

function cerrarModal(){
  document.getElementById("modal").style.display="none";
}

function guardar(){
  let estado=[];
  document.querySelectorAll(".curso").forEach(c=>{
    estado.push(c.classList.contains("aprobado"));
  });
  localStorage.setItem("estadoCursos",JSON.stringify(estado));
}

function cargar(){
  let estado=JSON.parse(localStorage.getItem("estadoCursos"));
  if(!estado) return;
  document.querySelectorAll(".curso").forEach((c,i)=>{
    if(estado[i]) c.classList.add("aprobado");
  });
}

function actualizar(){
  let cursos=document.querySelectorAll(".curso");
  let total=cursos.length;
  let aprobados=0;

  cursos.forEach(c=>{ if(c.classList.contains("aprobado")) aprobados++; });

  let porcentaje=Math.round((aprobados/total)*100);
  document.querySelector(".barra span").style.width=porcentaje+"%";
  document.getElementById("textoProgreso").innerText=
    `Avance acad√©mico: ${porcentaje}% (${aprobados} de ${total})`;

  // desbloqueo por ciclos
  document.querySelectorAll(".ciclo").forEach((ciclo,i)=>{
    if(i===0){ ciclo.classList.add("activo"); return; }
    let anterior=document.querySelectorAll(".ciclo")[i-1];
    let pendientes=anterior.querySelectorAll(".curso:not(.aprobado)").length;
    if(pendientes===0) ciclo.classList.add("activo");
  });
}

window.onload=()=>{
  cargar();
  actualizar();
};
</script>
</head>

<body>

<h1>Malla Curricular ‚Äì Enfermer√≠a UPSJB</h1>

<div class="progreso-box">
  <div class="barra"><span></span></div>
  <div id="textoProgreso"></div>
</div>

<!-- CICLO I -->
<div class="ciclo activo">
  <div class="ciclo-header" onclick="toggleCiclo(this)">Ciclo I</div>
  <div class="cursos">
    <div class="curso basico" data-nombre="Fundamentos Biol√≥gicos I" data-creditos="3" data-tipo="B√°sico"
      onclick="aprobar(this)" ondblclick="mostrarDetalle(this)">üß† Fundamentos Biol√≥gicos I (3 cr)</div>

    <div class="curso enfermeria" data-nombre="Historia del Cuidado" data-creditos="3" data-tipo="Enfermer√≠a"
      onclick="aprobar(this)" ondblclick="mostrarDetalle(this)">ü©∫ Historia del Cuidado (3 cr)</div>
  </div>
</div>

<!-- CICLO II -->
<div class="ciclo">
  <div class="ciclo-header" onclick="toggleCiclo(this)">Ciclo II</div>
  <div class="cursos">
    <div class="curso clinico" data-nombre="Estructura y Funci√≥n I" data-creditos="3" data-tipo="Cl√≠nico"
      onclick="aprobar(this)" ondblclick="mostrarDetalle(this)">üè• Estructura y Funci√≥n I (3 cr)</div>
  </div>
</div>

<!-- MODAL -->
<div id="modal" onclick="cerrarModal()">
  <div id="modalContent" onclick="event.stopPropagation()">
    <h3 id="modalTitulo"></h3>
    <p id="modalInfo"></p>
    <button onclick="cerrarModal()">Cerrar</button>
  </div>
</div>

</body>
</html>
