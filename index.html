<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Malla Curricular – Enfermería</title>

<style>
body{
  font-family: system-ui, Arial, sans-serif;
  background:#f4f1fb;
  margin:0;
}

header{
  background:#6b4fc3;
  color:white;
  text-align:center;
  padding:16px;
  font-size:20px;
  font-weight:600;
}

.container{ padding:14px; }

.progress-box{
  background:white;
  padding:14px;
  border-radius:14px;
  margin-bottom:20px;
}

.progress-bar{
  height:12px;
  background:#e6e1f3;
  border-radius:8px;
  overflow:hidden;
}

.progress-fill{
  height:100%;
  width:0%;
  background:#6b4fc3;
  transition:.3s;
}

.progress-text,.creditos-text{
  text-align:center;
  font-size:14px;
  margin-top:6px;
}

/* CICLOS */
.ciclo{
  background:#d8cef2;
  padding:12px 14px;
  border-radius:14px;
  margin-top:20px;
  font-weight:600;
}

.ciclo small{
  display:block;
  font-weight:400;
  font-size:13px;
  margin-top:4px;
}

/* BARRA POR CICLO */
.ciclo-barra{
  height:8px;
  background:#ede7f6;
  border-radius:6px;
  overflow:hidden;
  margin-top:6px;
}

.ciclo-fill{
  height:100%;
  width:0%;
  transition:.3s;
}

/* CURSOS */
.curso{
  background:white;
  padding:12px;
  border-radius:12px;
  margin-top:8px;
  cursor:pointer;
}

.curso span{
  font-size:13px;
  color:#555;
}

.curso.aprobado{
  opacity:.6;
  text-decoration:line-through;
  border:2px solid #6b4fc3;
  animation:pop .25s ease;
}

@keyframes pop{
  0%{transform:scale(1)}
  50%{transform:scale(1.08)}
  100%{transform:scale(1)}
}
</style>
</head>

<body>

<header>Malla Curricular – Enfermería</header>

<div class="container">

<div class="progress-box">
  <div class="progress-bar"><div class="progress-fill"></div></div>
  <div class="progress-text" id="progressText"></div>
  <div class="creditos-text" id="creditosText"></div>
</div>

<script>
const data = [
{ciclo:"CICLO 01", cursos:[
["Historia y Epistemología del Cuidado",3],
["Bases de la Psicología Humana",2],
["Fundamentos Biológicos I",3],
["Vida Universitaria y Gestión del Conocimiento",3],
["Lógico-Matemática",3],
["Redacción e Interpretación de Textos",3]
]},
{ciclo:"CICLO 02", cursos:[
["Estructura y Función I",3],
["Fundamentos Biológicos II",3],
["Inglés I",3],
["Filosofía",3],
["Realidad Nacional",3],
["Comunicación y Medios Digitales",3]
]},
{ciclo:"CICLO 03", cursos:[
["Fundamentos Básicos del Cuidado Enfermero I",3],
["Nutrición y Dietoterapia",3],
["Estructura y Función II",3],
["Bioquímica",2],
["Inglés II",2],
["Interculturalidad",3],
["Pensamiento Crítico, Creativo y Emprendimiento",3]
]},
{ciclo:"CICLO 04", cursos:[
["Epidemiología",2],
["Integrador Fundamentos Básicos del Cuidado Enfermero II",6],
["Salud Familiar y Comunitaria",3],
["Sistematización y Métodos Estadísticos",2],
["Enfermería Legal y Legislación en Salud",2],
["Ciudadanía Global y Desarrollo Sostenible",3]
]},
{ciclo:"CICLO 05", cursos:[
["Farmacología Aplicada a la Enfermería",3],
["Cuidado Enfermero I",8],
["Simulación I (Reanimación Cardiopulmonar Básico)",2],
["Tecnologías del Empoderamiento Participativo en la Educación en Salud",4],
["Metodología de la Investigación",3]
]},
{ciclo:"CICLO 06", cursos:[
["Cuidado Enfermero II",10],
["Simulación II (Procedimientos Invasivos Básicos)",2],
["Recursos para la Alfabetización en Salud",3],
["Redacción y Publicación de Artículo I",2]
]},
{ciclo:"CICLO 07", cursos:[
["Cuidado Enfermero III",10],
["Simulación III (Procedimientos Invasivos Avanzados)",2],
["Gestión Estratégica y Emprendimiento",4],
["Redacción y Publicación de Artículo II",2]
]},
{ciclo:"CICLO 08", cursos:[
["Gestión de los Servicios de Enfermería",4],
["Cuidado Enfermero IV",10],
["Emergencias y Urgencias en Enfermería",2],
["Seminario Integrador",2],
["Ética y Profesionalismo",3]
]},
{ciclo:"CICLO 09", cursos:[
["Taller Guía de Proyecto de Tesis",2],
["Primera Rotación de Internado Comunitario I",10],
["Segunda Rotación de Internado Comunitario I",10]
]},
{ciclo:"CICLO 10", cursos:[
["Trabajo de Investigación",2],
["Tercera Rotación de Internado Clínico I",10],
["Cuarta Rotación de Internado Clínico II",10]
]},
{ciclo:"CICLO 99 – ELECTIVOS", cursos:[
["Taller de Desarrollo Personal e Inteligencia Emocional",2],
["Herramientas y Gestores Bibliográficos",2],
["Neurociencia del Dolor",2],
["One Health: Abordaje del Interfaz Humano-Animal-Ecosistema",2],
["Manejo Integral en Pandemias y Epidemias",2],
["Gestión de la Innovación y Patentes",2],
["Clinical Grand Round",2],
["Terapéutica Integral e Integrada",2],
["Psicología del Deporte",2],
["Psicología y Afrontamiento de las Adicciones",2]
]}
];

let estado = JSON.parse(localStorage.getItem("estadoCursos")) || [];
let totalCreditos = 0;
const cont = document.querySelector(".container");

data.forEach((ciclo,i)=>{
  const totalCiclo = ciclo.cursos.reduce((s,c)=>s+c[1],0);
  totalCreditos += totalCiclo;

  const h=document.createElement("div");
  h.className="ciclo";
  h.innerHTML=`
    ${ciclo.ciclo}
    <small id="info-${i}">Créditos: 0 / ${totalCiclo}</small>
    <div class="ciclo-barra">
      <div class="ciclo-fill" id="barra-${i}"></div>
    </div>`;
  cont.appendChild(h);

  ciclo.cursos.forEach((cur,j)=>{
    const id=`${i}-${j}`;
    const d=document.createElement("div");
    d.className="curso";
    if(estado.includes(id)) d.classList.add("aprobado");
    d.dataset.creditos=cur[1];
    d.dataset.ciclo=i;
    d.innerHTML=`${cur[0]}<br><span>${cur[1]} créditos</span>`;
    d.onclick=()=>{
      d.classList.toggle("aprobado");
      if(d.classList.contains("aprobado")) estado.push(id);
      else estado=estado.filter(x=>x!==id);
      localStorage.setItem("estadoCursos",JSON.stringify(estado));
      actualizar();
    };
    cont.appendChild(d);
  });
});

function colorLila(p){
  if(p>=100) return "#6b4fc3";
  if(p>=60) return "#9b86d9";
  if(p>=30) return "#c1b3ea";
  return "#e0d9f5";
}

function actualizar(){
  let aprobTotal=0;

  data.forEach((c,i)=>{
    let aprobCiclo=0;
    document.querySelectorAll(`.curso[data-ciclo="${i}"].aprobado`)
      .forEach(x=>aprobCiclo+=parseInt(x.dataset.creditos));

    const totalCiclo=c.cursos.reduce((s,v)=>s+v[1],0);
    const pct=Math.round((aprobCiclo/totalCiclo)*100);

    document.getElementById(`info-${i}`).innerText=
      `Créditos: ${aprobCiclo} / ${totalCiclo}`;

    const barra=document.getElementById(`barra-${i}`);
    barra.style.width=pct+"%";
    barra.style.background=colorLila(pct);

    aprobTotal+=aprobCiclo;
  });

  const pctTotal=Math.round((aprobTotal/totalCreditos)*100);
  document.querySelector(".progress-fill").style.width=pctTotal+"%";
  document.getElementById("progressText").innerText=`Avance académico: ${pctTotal}%`;
  document.getElementById("creditosText").innerText=
    `Créditos aprobados: ${aprobTotal} / ${totalCreditos}`;
}

actualizar();
</script>

</div>
</body>
</html>
